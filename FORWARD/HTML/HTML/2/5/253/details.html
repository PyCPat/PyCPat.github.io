<html><h3>Pattern ID :253
</h3><img src='906513.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        memory_input = initial_memory
        while True:
            if t &gt; 0:
                memory_input = outputs[-1]<a id="change"> if </a>greedy<a id="change"> else </a>memory[t - 1]
            &#47&#47 Prenet
            processed_memory = self.prenet(memory_input)
</code></pre><h3>After Change</h3><pre><code class='java'>
            if t &gt; 0:
                &#47&#47 using harmonized teacher-forcing.
                &#47&#47 from https://arxiv.org/abs/1707.06588
                <a id="change">if </a>greedy<a id="change">:
                    </a>memory_input<a id="change"> = </a><a id="change">outputs[-1]</a>
                else:
                    &#47&#47 combine prev. model output and prev. real target
                    memory_input = torch.div(outputs[-1] + memory[t-1], 2.0)
                    &#47&#47 add a random noise</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/coqui-ai/tts/commit/b5f2181e04ebe293f39c49a4304861c52218b7c4#diff-63415e5bdfe9c172be8a9cadb35d1f47d718fea5f15c6879f5715ebb9e331155L267' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 906513</div><div id='project'> Project Name: coqui-ai/tts</div><div id='commit'> Commit Name: b5f2181e04ebe293f39c49a4304861c52218b7c4</div><div id='time'> Time: 2018-02-23</div><div id='author'> Author: egolge@mozilla.com</div><div id='file'> File Name: layers/tacotron.py</div><div id='m_class'> M Class Name: Decoder</div><div id='n_method'> N Class Name: Decoder</div><div id='m_method'> M Method Name: forward(4)</div><div id='n_method'> N Method Name: forward(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: layers/tacotron.py</div><div id='n_file'> N File Name: layers/tacotron.py</div><div id='m_start'> M Start Line: 267</div><div id='m_end'> M End Line: 303</div><div id='n_start'> N Start Line: 267</div><div id='n_end'> N End Line: 315</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        memory_input = initial_memory
        while True:
            if t &gt; 0:
                memory_input = outputs[-1]<a id="change"> if </a>greedy<a id="change"> else </a>memory[t - 1]

            &#47&#47 Prenet
            processed_memory = self.prenet(memory_input)</code></pre><h3>After Change</h3><pre><code class='java'>
        memory_input = initial_memory
        while True:
            if t &gt; 0:
                <a id="change">if </a>greedy<a id="change">:
                    </a>memory_input<a id="change"> = </a><a id="change">outputs[-1]</a>
                else:
                    &#47&#47 combine prev. model output and prev. real target
                    memory_input = torch.div(outputs[-1] + memory[t-1], 2.0)
                    &#47&#47 add a random noise</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/coqui-ai/tts/commit/9b4aa92667ce7977f30f9b6473b567567a78046f#diff-63415e5bdfe9c172be8a9cadb35d1f47d718fea5f15c6879f5715ebb9e331155L234' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 906512</div><div id='project'> Project Name: coqui-ai/tts</div><div id='commit'> Commit Name: 9b4aa92667ce7977f30f9b6473b567567a78046f</div><div id='time'> Time: 2018-03-19</div><div id='author'> Author: egolge@mozilla.com</div><div id='file'> File Name: layers/tacotron.py</div><div id='m_class'> M Class Name: Decoder</div><div id='n_method'> N Class Name: Decoder</div><div id='m_method'> M Method Name: forward(3)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: layers/tacotron.py</div><div id='n_file'> N File Name: layers/tacotron.py</div><div id='m_start'> M Start Line: 253</div><div id='m_end'> M End Line: 289</div><div id='n_start'> N Start Line: 253</div><div id='n_end'> N End Line: 300</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            if self.training and use_grad_ckpt:
                x = torch.utils.checkpoint.checkpoint(
                    transformer,
                    x, past[i]<a id="change"> if </a>past is not None<a id="change"> else </a>None, mask)
            else:
                x, p = transformer(
                    x, past[i] if past is not None else None, mask)</code></pre><h3>After Change</h3><pre><code class='java'>

            x = transformer(x, past[i] if past is not None else None, mask)

            <a id="change">if </a>not self.training<a id="change">:
                </a>present.append(x[1])
                x<a id="change"> = </a><a id="change">x[0]</a>

        x = self.ln_head(x)
        x = self.token_embedding(x, transposed=True)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/affjljoo3581/gpt2/commit/71ebf9105be828337463cd34bbf6252414620aae#diff-c21f139f23f1e37d2338cff187fc0547f2e06a8ede387d58cc6d38b1becc6e6fL84' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 906514</div><div id='project'> Project Name: affjljoo3581/gpt2</div><div id='commit'> Commit Name: 71ebf9105be828337463cd34bbf6252414620aae</div><div id='time'> Time: 2020-09-25</div><div id='author'> Author: affjljoo3581@gmail.com</div><div id='file'> File Name: src/gpt2/modeling/transformer.py</div><div id='m_class'> M Class Name: Transformer</div><div id='n_method'> N Class Name: Transformer</div><div id='m_method'> M Method Name: forward(4)</div><div id='n_method'> N Method Name: forward(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: src/gpt2/modeling/transformer.py</div><div id='n_file'> N File Name: src/gpt2/modeling/transformer.py</div><div id='m_start'> M Start Line: 92</div><div id='m_end'> M End Line: 110</div><div id='n_start'> N Start Line: 105</div><div id='n_end'> N End Line: 114</div><BR>