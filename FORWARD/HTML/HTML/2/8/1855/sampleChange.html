<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            W = self.encoder.src_embedding.get_embedding().T

        mask = x.view(-1).eq(self.MASK)
        enc_output<a id="change"> = </a><a id="change">enc_output.view(-1</a>, self.d_model<a id="change">)</a>[mask]
        
        logits = torch.matmul(enc_output, W)
        </code></pre><h3>After Change</h3><pre><code class='java'>

        enc_output = enc_outputs[0]

        <a id="change">if self.activation == "relu"</a><a id="change">:
            </a>enc_output<a id="change"> = </a>F.relu(enc_output)
        elif self.activation == "gelu":
            enc_output<a id="change"> = </a>gelu_new(enc_output)
        enc_output = self.norm(enc_output)
            
        if self.share_emb_out_proj == False:</code></pre>