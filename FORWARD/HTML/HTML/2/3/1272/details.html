<html><h3>Pattern ID :1272
</h3><img src='4481704.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            if i != self.ignore_index:
                dice_loss = dice(predict[:, i], target[:, i])
                if self.weight is not None:
                    <a id="change">assert </a>self.weight.shape[0] == target.shape[1], \
                        &quotExpect weight shape [{}], get[{}]&quot.format(target.shape[1], self.weight.shape[0])
                    dice_loss *= self.weights[i]
                total_loss += dice_loss</code></pre><h3>After Change</h3><pre><code class='java'>
        assert inputs.size() == target.size(), &quotpredict & target shape do not match&quot
        class_wise_dice = []
        loss = 0.0
        for i in <a id="change">range(0</a>, self.n_classes<a id="change">)</a>:
            dice = self._dice_loss(inputs[:, i], target[:, i])
            class_wise_dice.append(1.0 - dice.item())
            loss += dice * weight[i]</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/montaellis/pytorch-medical-segmentation/commit/b8a38cb1bdf6cd7c93a5c1945ab23f7a54c87406#diff-0419e9aa72248110d12ce030e3c15e94f00f1f38cbd819d7e6f0d269eee1b832L118' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 4481704</div><div id='project'> Project Name: montaellis/pytorch-medical-segmentation</div><div id='commit'> Commit Name: b8a38cb1bdf6cd7c93a5c1945ab23f7a54c87406</div><div id='time'> Time: 2022-06-09</div><div id='author'> Author: elliszkn@163.com</div><div id='file'> File Name: loss_function.py</div><div id='m_class'> M Class Name: DiceLoss</div><div id='n_method'> N Class Name: DiceLoss</div><div id='m_method'> M Method Name: forward(5)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: loss_function.py</div><div id='n_file'> N File Name: loss_function.py</div><div id='m_start'> M Start Line: 118</div><div id='m_end'> M End Line: 134</div><div id='n_start'> N Start Line: 124</div><div id='n_end'> N End Line: 138</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        
        n_dims = target.dim()

        <a id="change">assert </a>n_dims in [2, 3, 4], "Only 2D or 3D or 4D tensor is acceptable, but given {}D tensor.".format(n_dims)

        loss = weighted_sdr(input, target, source_dim=self.source_dim, eps=self.eps)
</code></pre><h3>After Change</h3><pre><code class='java'>
                reduction_dim = self.reduction_dim
            else:
                n_dims = loss.dim()
                reduction_dim = tuple(<a id="change">range(1</a>, n_dims<a id="change">)</a>)
            
            if self.reduction == &quotmean&quot:
                loss = loss.mean(dim=reduction_dim)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/1d2af1cc37903a67df12b7cd28506a68f176cbc3#diff-187eae737ed368d87132eca78bc74c0b62fd1d0d0679f9fd6f11d9ac0d6a46d7L272' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 4481705</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: 1d2af1cc37903a67df12b7cd28506a68f176cbc3</div><div id='time'> Time: 2021-10-29</div><div id='author'> Author: delta9guitar97@gmail.com</div><div id='file'> File Name: src/criterion/sdr.py</div><div id='m_class'> M Class Name: WeightedSDR</div><div id='n_method'> N Class Name: WeightedSDR</div><div id='m_method'> M Method Name: forward(4)</div><div id='n_method'> N Method Name: forward(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: src/criterion/sdr.py</div><div id='n_file'> N File Name: src/criterion/sdr.py</div><div id='m_start'> M Start Line: 280</div><div id='m_end'> M End Line: 298</div><div id='n_start'> N Start Line: 283</div><div id='n_end'> N End Line: 295</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        
        n_dims = target.dim()

        <a id="change">assert </a>n_dims in [2, 3, 4], "Only 2D or 3D or 4D tensor is acceptable, but given {}D tensor.".format(n_dims)

        loss = - weighted_sdr(input, target, source_dim=self.source_dim, eps=self.eps)
</code></pre><h3>After Change</h3><pre><code class='java'>
                reduction_dim = self.reduction_dim
            else:
                n_dims = loss.dim()
                reduction_dim = tuple(<a id="change">range(1</a>, n_dims<a id="change">)</a>)
            
            if self.reduction == &quotmean&quot:
                loss = loss.mean(dim=reduction_dim)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/ad3be2d5f299db9f3a31cbd870818b133f8f1398#diff-187eae737ed368d87132eca78bc74c0b62fd1d0d0679f9fd6f11d9ac0d6a46d7L316' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 4481706</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: ad3be2d5f299db9f3a31cbd870818b133f8f1398</div><div id='time'> Time: 2021-10-29</div><div id='author'> Author: delta9guitar97@gmail.com</div><div id='file'> File Name: src/criterion/sdr.py</div><div id='m_class'> M Class Name: NegWeightedSDR</div><div id='n_method'> N Class Name: NegWeightedSDR</div><div id='m_method'> M Method Name: forward(4)</div><div id='n_method'> N Method Name: forward(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: src/criterion/sdr.py</div><div id='n_file'> N File Name: src/criterion/sdr.py</div><div id='m_start'> M Start Line: 324</div><div id='m_end'> M End Line: 342</div><div id='n_start'> N Start Line: 327</div><div id='n_end'> N End Line: 339</div><BR>