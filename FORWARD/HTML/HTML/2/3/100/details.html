<html><h3>Pattern ID :100
</h3><img src='428788.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    def forward(self, x):
        x = self.features(x)
        x = <a id="change">x.view(</a>x.size(0), <a id="change">-1</a><a id="change">)</a>
        x = self.classifier(x)
        return x

</code></pre><h3>After Change</h3><pre><code class='java'>
    def forward(self, x):
        print(&quotx.shape:&quot,x.shape)
        x = self.features(x)
        <a id="change">print(</a>&quotx.shape:&quot,x.shape<a id="change">)</a>
        &#47&#47 x = x.view(x.size(0), -1)
        x = self.classifier(x)
        print(&quotx.shape:&quot,x.shape)
        return x</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/cbica/gandlf/commit/c1e85a74696e576c03ea9be291ecfe1ba664b1d5#diff-f288b7db78e8441e1291ff9a5c15ed7f7923fa0d54e2b5d296862437fde2b443L64' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 428788</div><div id='project'> Project Name: cbica/gandlf</div><div id='commit'> Commit Name: c1e85a74696e576c03ea9be291ecfe1ba664b1d5</div><div id='time'> Time: 2021-06-15</div><div id='author'> Author: sarthak.pati@hotmail.com</div><div id='file'> File Name: GANDLF/models/pool_test.py</div><div id='m_class'> M Class Name: POOL_TEST</div><div id='n_method'> N Class Name: POOL_TEST</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: GANDLF/models/pool_test.py</div><div id='n_file'> N File Name: GANDLF/models/pool_test.py</div><div id='m_start'> M Start Line: 64</div><div id='m_end'> M End Line: 65</div><div id='n_start'> N Start Line: 83</div><div id='n_end'> N End Line: 88</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            pd = torch.det(Aup) * torch.det(Adown)
            out *= pd

        return -0.5*<a id="change">out.view(-1</a>, self.nconfs<a id="change">)</a>

    def _forward_loop(self, MO, d2MO, return_local_energy=False):
        &quot&quot&quot Compute the kinetic energy using the trace trick
        for a product of spin up/down determinant</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 product
        out = (btrace(iAup@Bup) + btrace(iAdown@Bdown))
        <a id="change">print(</a>out.shape<a id="change">)</a>

        &#47&#47 multiply by det if necessary
        if not return_local_energy:
            pd = torch.det(Aup) * torch.det(Adown)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/nlesc-jcer/qmctorch/commit/81bc1246590de18390d900e4d50f3145451d5185#diff-a465387e34d541ea42be6f2ed5187c15baf47f75df50afc89d1e26914ccc1b36L35' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 428786</div><div id='project'> Project Name: nlesc-jcer/qmctorch</div><div id='commit'> Commit Name: 81bc1246590de18390d900e4d50f3145451d5185</div><div id='time'> Time: 2019-12-13</div><div id='author'> Author: nicolas.gm.renaud@gmail.com</div><div id='file'> File Name: deepqmc/wavefunction/kinetic_pooling.py</div><div id='m_class'> M Class Name: KineticPooling</div><div id='n_method'> N Class Name: KineticPooling</div><div id='m_method'> M Method Name: forward(6)</div><div id='n_method'> N Method Name: forward(6)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: deepqmc/wavefunction/kinetic_pooling.py</div><div id='n_file'> N File Name: deepqmc/wavefunction/kinetic_pooling.py</div><div id='m_start'> M Start Line: 67</div><div id='m_end'> M End Line: 74</div><div id='n_start'> N Start Line: 63</div><div id='n_end'> N End Line: 77</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        &#47&#47 seq - [batch_size, seq_len]
        pos = torch.arange(0, seq.shape[1]).unsqueeze(0).repeat(seq.shape[0], 1).to(self.args.device)
        seq = self.dropout((self.tok_embed(seq) * self.scale) + self.pos_encoding(pos))
        print(any(<a id="change">torch.isnan(seq).view(-1</a><a id="change">)</a>))
        seq = seq.transpose(0, 1)
        out = self.transformer(seq, seq).transpose(0, 1)
        print(seq, &quot\n&quot, out)</code></pre><h3>After Change</h3><pre><code class='java'>
    def forward(self, seq):
        &#47&#47 seq - [batch_size, seq_len]
        mask = self._generate_square_subsequent_mask(seq.shape[1])
        <a id="change">print(</a>mask<a id="change">)</a>
        pos = torch.arange(0, seq.shape[1]).unsqueeze(0).repeat(seq.shape[0], 1).to(self.args.device)
        seq = (self.tok_embed(seq) * self.scale) + self.pos_encoding(pos)
        seq = seq.transpose(0, 1)
        out = self.transformer(seq, seq).transpose(0, 1)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/ammesatyajit/videobert/commit/da701dd8f2ec37d38cc5c66982a1894cda0fef86#diff-bfbdfcab00b44379d0d84330903c598d633961fc4e68d6adc21c8b9cea49fc5aL154' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 428784</div><div id='project'> Project Name: ammesatyajit/videobert</div><div id='commit'> Commit Name: da701dd8f2ec37d38cc5c66982a1894cda0fef86</div><div id='time'> Time: 2020-09-19</div><div id='author'> Author: ammesatyajit@gmail.com</div><div id='file'> File Name: VideoBERT/train/custom_vid_transformer.py</div><div id='m_class'> M Class Name: VideoTransformer</div><div id='n_method'> N Class Name: VideoTransformer</div><div id='m_method'> M Method Name: forward(2)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: VideoBERT/train/custom_vid_transformer.py</div><div id='n_file'> N File Name: VideoBERT/train/custom_vid_transformer.py</div><div id='m_start'> M Start Line: 157</div><div id='m_end'> M End Line: 161</div><div id='n_start'> N Start Line: 156</div><div id='n_end'> N End Line: 159</div><BR>