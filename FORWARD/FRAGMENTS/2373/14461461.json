{"BEFORE":"        h = self.block1(x)\n        h += self.mlp(time_emb)[:, :, None, None]\n        h = self.block2(h)\n        return h + self.res_conv(x)\n","AFTER":"        hiddens = [fn(x) for fn in self.blocks_in]\n\n        time_emb = self.mlp(time_emb)\n        time_emb = rearrange(time_emb, 'b c -> b c () ()')\n\n        hiddens = [h + time_emb for h in hiddens]\n        hiddens = [fn(h) for fn, h in zip(self.blocks_out, hiddens)]\n        return sum(hiddens) + self.res_conv(x)\n"}