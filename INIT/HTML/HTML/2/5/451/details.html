<html><h3>Pattern ID :451
</h3><img src='1277411.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.block_num = block_num
        self.dim = dim

        <a id="change">print(</a>&quotstage contains &quot,block_num, <a id="change">&quot blocks&quot</a><a id="change">)</a>

        &#47&#47 构建block
        self.resblock_list = nn.ModuleList([])
        for index in range(self.block_num):</code></pre><h3>After Change</h3><pre><code class='java'>
        print(&quotResStage stage contains &quot, block_num, &quot blocks&quot)

        &#47&#47 构建block
        <a id="change">if type == &quot33&quot</a><a id="change">:
            </a>self.block_list = nn.ModuleList([])
            for index in range(self.block_num):
                if index == 0:
                    self.block_list.append(ResBlock(type, in_channels, None, out_channels, norm=norm, active=active, gn_c=gn_c, dim=dim))
                else:
                    self.block_list.append(ResBlock(type, out_channels, None, out_channels, norm=norm, active=active, gn_c=gn_c, dim=dim))
        elif type == &quot131&quot:
            self.block_list<a id="change"> = </a>nn.ModuleList([])
            for index in range(self.block_num):
                if index == 0:
                    self.block_list.append(ResBlock(type, in_channels, middle_channels, out_channels, norm=norm, active=active, gn_c = gn_c, dim = dim))</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/wamawama/wama_modules/commit/b2bf89e72b262002500e8271f984d6f8afac7eb3#diff-fd72c83d7a844cbbdef927405a10ec8803d51b0f46ea91e27f31e7b97e5e3c1cL419' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1277411</div><div id='project'> Project Name: wamawama/wama_modules</div><div id='commit'> Commit Name: b2bf89e72b262002500e8271f984d6f8afac7eb3</div><div id='time'> Time: 2022-10-25</div><div id='author'> Author: wmy19970215@gmail.com</div><div id='file'> File Name: wama_modules/BaseModule.py</div><div id='m_class'> M Class Name: ResStage</div><div id='n_method'> N Class Name: ResStage</div><div id='m_method'> M Method Name: __init__(10)</div><div id='n_method'> N Method Name: __init__(6)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: wama_modules/BaseModule.py</div><div id='n_file'> N File Name: wama_modules/BaseModule.py</div><div id='m_start'> M Start Line: 419</div><div id='m_end'> M End Line: 429</div><div id='n_start'> N Start Line: 439</div><div id='n_end'> N End Line: 466</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        self.num_frames = num_frames
        self.embed_dim = embed_dim
        norm_layer = norm_layer or partial(nn.LayerNorm, eps=1e-6)
        <a id="change">print(&quot&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47USING ATTENTION STYLE: &quot</a>, attention_style<a id="change">)</a>
        if hybrid_backbone is not None:
            raise NotImplementedError(&quothybrid backbone not implemented&quot)
        else:
            &#47&#47 self.patch_embed = VideoPatchEmbed(</code></pre><h3>After Change</h3><pre><code class='java'>
                drop=drop_rate, attn_drop=attn_drop_rate, drop_path=dpr[i], norm_layer=norm_layer, time_init=time_init,
                attention_style=attention_style)
            for i in range(depth)])
        <a id="change">if self.attention_style == &quotbridge_former&quot</a><a id="change">:
            </a>self.norm1<a id="change"> = </a>norm_layer(embed_dim)
        else:
            self.norm = norm_layer(embed_dim)
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/towhee-io/towhee/commit/15e006859da731344c13504dc8ceda8f33222264#diff-9595f8ca5b4c746da962b23b6f83711c6a60501eeba62ae2004fd27a4e076486L174' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1277408</div><div id='project'> Project Name: towhee-io/towhee</div><div id='commit'> Commit Name: 15e006859da731344c13504dc8ceda8f33222264</div><div id='time'> Time: 2022-06-15</div><div id='author'> Author: 106302799+jinlingxu06@users.noreply.github.com</div><div id='file'> File Name: towhee/models/frozen_in_time/frozen_video_transformer.py</div><div id='m_class'> M Class Name: SpaceTimeTransformer</div><div id='n_method'> N Class Name: SpaceTimeTransformer</div><div id='m_method'> M Method Name: __init__(20)</div><div id='n_method'> N Method Name: __init__(20)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: towhee/models/frozen_in_time/frozen_video_transformer.py</div><div id='n_file'> N File Name: towhee/models/frozen_in_time/frozen_video_transformer.py</div><div id='m_start'> M Start Line: 207</div><div id='m_end'> M End Line: 235</div><div id='n_start'> N Start Line: 209</div><div id='n_end'> N End Line: 246</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        elif self.merge_name == &quotcat&quot:
            self.output_dim = self.input_dim_1 + self.input_dim_2
        else:
            <a id="change">print(f&quot{self.merge_name} did not match any options.&quot</a><a id="change">)</a>

        &#47&#47 Prepare streams info
        self.streams_in_module = {&quotinputs&quot: [[self.input_name_1, [&quotBSZ&quot, len_input_1, self.input_dim_1]],
                                             [self.input_name_2, [&quotBSZ&quot, len_input_2, self.input_dim_2]],</code></pre><h3>After Change</h3><pre><code class='java'>
        assert (self.merge_name == &quotadd&quot) or (self.merge_name == &quotmultiply&quot) or (self.merge_name == &quotsubtract&quot), \
            f"Merge stream operations available are: &quotadd&quot, &quotmultiply&quot, and &quotsubtract&quot!"

        <a id="change">if len(self.input_shape_1) &lt; len(self.input_shape_2)</a><a id="change">:
            </a>self.output_shape<a id="change"> = </a>self.input_shape_2
        else:
            self.output_shape = self.input_shape_1
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/antofuller/configaformers/commit/3851387d9566177e253903e820246444f14cb2f8#diff-c1b71fd7fd14036516fc6877538b03b9abba873933e0b8ab4b5fb9864026e2e6L38' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1277407</div><div id='project'> Project Name: antofuller/configaformers</div><div id='commit'> Commit Name: 3851387d9566177e253903e820246444f14cb2f8</div><div id='time'> Time: 2021-11-12</div><div id='author'> Author: afuller187187@gmail.com</div><div id='file'> File Name: stream_module.py</div><div id='m_class'> M Class Name: MergeStreams</div><div id='n_method'> N Class Name: MergeStreams</div><div id='m_method'> M Method Name: __init__(3)</div><div id='n_method'> N Method Name: __init__(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: stream_module.py</div><div id='n_file'> N File Name: stream_module.py</div><div id='m_start'> M Start Line: 47</div><div id='m_end'> M End Line: 73</div><div id='n_start'> N Start Line: 52</div><div id='n_end'> N End Line: 68</div><BR>