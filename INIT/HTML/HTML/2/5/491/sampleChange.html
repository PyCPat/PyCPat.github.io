<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.merge_count = int(math.log2(merge_count))

        self.norm_factor = math.sqrt(
            <a id="change">math.sqrt(</a>self.config.hidden_size<a id="change"> // </a>self.config.heads<a id="change">)</a>)
        self.qkv_merging = qkv_merging

        if self.config.scale_attn_by_inverse_layer_idx is True:</code></pre><h3>After Change</h3><pre><code class='java'>
        self.q_groups = q_groups
        self.merge_count = int(math.log2(merge_count))

        self.norm_factor = <a id="change">math.sqrt(</a>self.config.hidden_size<a id="change"> // </a>self.config.heads<a id="change">)</a>
        if not config.use_mup:
            self.norm_factor<a id="change"> = </a>math.sqrt(self.norm_factor)
        self.qkv_merging = qkv_merging

        if self.config.scale_attn_by_inverse_layer_idx is True:</code></pre>