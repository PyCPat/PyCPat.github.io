<html><h3>Pattern ID :611
</h3><img src='2176325.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        stage_with_gcb = [False, False, False, False]
        if gcb and stage_with_gcb_str:
            stage_with_gcb_list = map(int, stage_with_gcb_str.split(&quot,&quot))
            <a id="change">for </a>n in stage_with_gcb_list<a id="change">:
                </a>stage_with_gcb[n]<a id="change"> = </a>True
        if num_layers in [50, 101, &quot101_32x8d&quot]:
            if num_layers == 50:
                resnet_fn = resnet50</code></pre><h3>After Change</h3><pre><code class='java'>
        self.bn = nn.Sequential(nn.BatchNorm2d(reduce_dim))
        self._init_bn(self.bn)

        self.loss_type<a id="change"> = </a>loss_type
        <a id="change">if &quotsoftmax&quot in self.loss_type</a><a id="change">:
            </a>self.fc_layer = nn.Sequential(nn.Dropout(), nn.Linear(reduce_dim, num_classes))
            self._init_fc(self.fc_layer)
            if &quotlabelsmooth&quot in self.loss_type:
                self.ce_loss<a id="change"> = </a>CrossEntropyLabelSmooth(num_classes)
            else:
                self.ce_loss<a id="change"> = </a>nn.CrossEntropyLoss()  &#47&#47 .cuda()
        elif &quotarcface&quot in self.loss_type:
            pass
        elif &quotcircle&quot in self.loss_type:
            self.fc_layer<a id="change"> = </a>Circle(num_classes, reduce_dim)

        if &quottriplet&quot in self.loss_type:
            self.tri_loss = TripletLoss(margin, normalize_feature=not &quotcircle&quot in self.loss_type) &#47&#47.cuda()</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 8</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/tencentyouturesearch/personreid-cacenet/commit/a82d51979279b93a4f34eff01d16de2af6f02b4d#diff-0bb3c15e92cf390ebe34d0347c1f8b228f6048214f97b56c95ca086dba70a523L15' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2176325</div><div id='project'> Project Name: tencentyouturesearch/personreid-cacenet</div><div id='commit'> Commit Name: a82d51979279b93a4f34eff01d16de2af6f02b4d</div><div id='time'> Time: 2020-08-13</div><div id='author'> Author: fufuyu@tencent.com</div><div id='file'> File Name: models/baseline.py</div><div id='m_class'> M Class Name: Baseline</div><div id='n_method'> N Class Name: Baseline</div><div id='m_method'> M Method Name: __init__(9)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: models/baseline.py</div><div id='n_file'> N File Name: models/baseline.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 70</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 65</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        _in_channels, _growth_rate = growth_rate[num_encoder_blocks - 1], growth_rate[num_encoder_blocks]
        bottleneck_bins = n_bins

        <a id="change">for idx</a> in range(num_encoder_blocks)<a id="change">:
            </a>bottleneck_bins<a id="change"> //= </a>scale[0]

        bottleneck_dense_block = choose_dense_rnn_block(
            rnn_type, rnn_position,</code></pre><h3>After Change</h3><pre><code class='java'>
        n_bins_detail = [n_bins]

        for _ in range(num_encoder_blocks):
            remain<a id="change"> = </a>(scale[0] - (_n_bins % scale[0])) % scale[0]
            <a id="change">if remain &gt; 0</a><a id="change">:
                </a>_n_bins<a id="change"> //= </a>scale[0]
                _n_bins<a id="change"> += </a>1
            else:
                _n_bins<a id="change"> //= </a>scale[0]
            n_bins_detail.append(_n_bins)

        if hidden_channels[num_encoder_blocks] &lt;= 0:</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tky823/dnn-based_source_separation/commit/3517c0809f61a23ca167956de8c040d4f725f822#diff-d3fa9a9548f5dfd9c54a06dd5bbbbf8bb39f494505f4bc0b61ad6202de8cee30L19' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2176324</div><div id='project'> Project Name: tky823/dnn-based_source_separation</div><div id='commit'> Commit Name: 3517c0809f61a23ca167956de8c040d4f725f822</div><div id='time'> Time: 2021-10-18</div><div id='author'> Author: delta9guitar97@gmail.com</div><div id='file'> File Name: src/models/m_dense_rnn.py</div><div id='m_class'> M Class Name: MDenseRNNBackbone</div><div id='n_method'> N Class Name: MDenseRNNBackbone</div><div id='m_method'> M Method Name: __init__(17)</div><div id='n_method'> N Method Name: __init__(18)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: src/models/m_dense_rnn.py</div><div id='n_file'> N File Name: src/models/m_dense_rnn.py</div><div id='m_start'> M Start Line: 19</div><div id='m_end'> M End Line: 67</div><div id='n_start'> N Start Line: 37</div><div id='n_end'> N End Line: 89</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        stage_with_gcb = [False, False, False, False]
        if gcb and stage_with_gcb_str:
            stage_with_gcb_list = map(int, stage_with_gcb_str.split(&quot,&quot))
            <a id="change">for n</a> in stage_with_gcb_list<a id="change">:
                </a>stage_with_gcb[n]<a id="change"> = </a>True
        if num_layers in [50, 101, &quot101_32x8d&quot]:
            if num_layers == 50:
                resnet_fn = resnet50</code></pre><h3>After Change</h3><pre><code class='java'>
        self.bn = nn.Sequential(nn.BatchNorm2d(reduce_dim))
        self._init_bn(self.bn)

        self.loss_type<a id="change"> = </a>loss_type
        <a id="change">if &quotsoftmax&quot in self.loss_type</a><a id="change">:
            </a>self.fc_layer = nn.Sequential(nn.Dropout(), nn.Linear(reduce_dim, num_classes))
            self._init_fc(self.fc_layer)
            if &quotlabelsmooth&quot in self.loss_type:
                self.ce_loss<a id="change"> = </a>CrossEntropyLabelSmooth(num_classes)
            else:
                self.ce_loss<a id="change"> = </a>nn.CrossEntropyLoss()  &#47&#47 .cuda()
        elif &quotarcface&quot in self.loss_type:
            pass
        elif &quotcircle&quot in self.loss_type:
            self.fc_layer<a id="change"> = </a>Circle(num_classes, reduce_dim)

        if &quottriplet&quot in self.loss_type:
            self.tri_loss = TripletLoss(margin, normalize_feature=not &quotcircle&quot in self.loss_type) &#47&#47.cuda()</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/tencentyouturesearch/personreid-cacenet/commit/a82d51979279b93a4f34eff01d16de2af6f02b4d#diff-0bb3c15e92cf390ebe34d0347c1f8b228f6048214f97b56c95ca086dba70a523L21' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 2176327</div><div id='project'> Project Name: tencentyouturesearch/personreid-cacenet</div><div id='commit'> Commit Name: a82d51979279b93a4f34eff01d16de2af6f02b4d</div><div id='time'> Time: 2020-08-13</div><div id='author'> Author: fufuyu@tencent.com</div><div id='file'> File Name: models/baseline.py</div><div id='m_class'> M Class Name: Baseline</div><div id='n_method'> N Class Name: Baseline</div><div id='m_method'> M Method Name: __init__(9)</div><div id='n_method'> N Method Name: __init__(8)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: models/baseline.py</div><div id='n_file'> N File Name: models/baseline.py</div><div id='m_start'> M Start Line: 26</div><div id='m_end'> M End Line: 70</div><div id='n_start'> N Start Line: 15</div><div id='n_end'> N End Line: 65</div><BR>