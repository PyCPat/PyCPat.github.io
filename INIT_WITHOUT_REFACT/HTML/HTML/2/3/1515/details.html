<html><h3>Pattern ID :1515
</h3><img src='4197654.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        for m in self.modules():
            if isinstance(m, nn.Conv2d):
                n = m.kernel_size[0] * <a id="change">m.kernel_size[1]</a> * m.out_channels
                m.weight.data.normal_(0, math.sqrt(2. / n))
            elif isinstance(m, nn.BatchNorm2d):
                m.weight.data.fill_(1)</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 This improves the model by 0.2~0.3% according to https://arxiv.org/abs/1706.02677
        if zero_init_residual:
            for m in self.modules():
                if <a id="change">isinstance(</a>m, Bottleneck<a id="change">)</a>:
                    nn.init.constant_(m.bn3.weight, 0)
                elif isinstance(m, BasicBlock):
                    nn.init.constant_(m.bn2.weight, 0)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/saareliad/ftpipe/commit/c7629820d24ed37ac363a721c7d9972d65d78d21#diff-1fb18f416110277152326bc3d6ec9b75cc1f7540f4ced8c1dcb5f2ba85bcacedL84' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 4197654</div><div id='project'> Project Name: saareliad/ftpipe</div><div id='commit'> Commit Name: c7629820d24ed37ac363a721c7d9972d65d78d21</div><div id='time'> Time: 2019-06-01</div><div id='author'> Author: alondej@gmail.com</div><div id='file'> File Name: models/ResNet.py</div><div id='m_class'> M Class Name: ResNet</div><div id='n_method'> N Class Name: ResNet</div><div id='m_method'> M Method Name: __init__(5)</div><div id='n_method'> N Method Name: __init__(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: models/ResNet.py</div><div id='n_file'> N File Name: models/ResNet.py</div><div id='m_start'> M Start Line: 84</div><div id='m_end'> M End Line: 101</div><div id='n_start'> N Start Line: 101</div><div id='n_end'> N End Line: 134</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        if first_input is not None:

            &#47&#47 Shape check
            if len(<a id="change">first_input[0]</a>.shape) &gt; 5 or len(first_input[0].shape) &lt; 2:

                err_msg = (
                    &quotThe input of "linear" must be a tensor with one of the  &quot</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Ensure kernel_size and padding are lists
        if not isinstance(self.kernel_size, list):
            self.kernel_size = [self.kernel_size]
        if self.padding is not None and not <a id="change">isinstance(</a>self.padding, list<a id="change">)</a>:
            self.padding = [self.padding]

        &#47&#47 Making sure that the kernel size is odd (if the kernel is not</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/speechbrain/speechbrain/commit/0ff34ea8f75b108dc69542658d39b70118bf01ca#diff-a7c3190f943cb09b3b7e0b688790f61f6e5e838546dec54468346ae1c2be7e08L449' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 4197656</div><div id='project'> Project Name: speechbrain/speechbrain</div><div id='commit'> Commit Name: 0ff34ea8f75b108dc69542658d39b70118bf01ca</div><div id='time'> Time: 2020-03-31</div><div id='author'> Author: plantinga.peter@gmail.com</div><div id='file'> File Name: speechbrain/nnet/architectures.py</div><div id='m_class'> M Class Name: conv</div><div id='n_method'> N Class Name: conv</div><div id='m_method'> M Method Name: __init__(12)</div><div id='n_method'> N Method Name: __init__(7)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: speechbrain/nnet/architectures.py</div><div id='n_file'> N File Name: speechbrain/nnet/architectures.py</div><div id='m_start'> M Start Line: 458</div><div id='m_end'> M End Line: 611</div><div id='n_start'> N Start Line: 387</div><div id='n_end'> N End Line: 516</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
            self.SA_layers.append(cur_layer)
            self.SA_layer_names.append(src_name)

            c_in += sum([<a id="change">x[-1]</a> for x in mlps])

        if &quotbev&quot in self.model_cfg.FEATURES_SOURCE:
            c_bev = num_bev_features</code></pre><h3>After Change</h3><pre><code class='java'>

            if SA_cfg[src_name].get(&quotINPUT_CHANNELS&quot, None) is None:
                input_channels = SA_cfg[src_name].MLPS[0][0] \
                    if <a id="change">isinstance(</a>SA_cfg[src_name].MLPS[0], list<a id="change">)</a> else SA_cfg[src_name].MLPS[0]
            else:
                input_channels = SA_cfg[src_name][&quotINPUT_CHANNELS&quot]
</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/open-mmlab/openpcdet/commit/13789796f70a033435a8289b3e1361000fc4694c#diff-3b1178f3f77283f0e9701868a1ed07231c51b22ea058d1c7d2e1f01ddf7cdeb4L125' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 4197659</div><div id='project'> Project Name: open-mmlab/openpcdet</div><div id='commit'> Commit Name: 13789796f70a033435a8289b3e1361000fc4694c</div><div id='time'> Time: 2021-12-26</div><div id='author'> Author: shaoshuaics@gmail.com</div><div id='file'> File Name: pcdet/models/backbones_3d/pfe/voxel_set_abstraction.py</div><div id='m_class'> M Class Name: VoxelSetAbstraction</div><div id='n_method'> N Class Name: VoxelSetAbstraction</div><div id='m_method'> M Method Name: __init__(6)</div><div id='n_method'> N Method Name: __init__(6)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: pcdet/models/backbones_3d/pfe/voxel_set_abstraction.py</div><div id='n_file'> N File Name: pcdet/models/backbones_3d/pfe/voxel_set_abstraction.py</div><div id='m_start'> M Start Line: 132</div><div id='m_end'> M End Line: 173</div><div id='n_start'> N Start Line: 132</div><div id='n_end'> N End Line: 166</div><BR>