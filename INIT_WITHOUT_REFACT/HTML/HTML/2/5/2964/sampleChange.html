<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        out = []

        if <a id="change">lq.shape[1]</a> &gt; 0:
            out.append(self.local_attention(lq, lk, lv, input_mask = input_mask))

        if q.shape[1] &gt; 0:</code></pre><h3>After Change</h3><pre><code class='java'>

        split_index_fn = partial(split_at_index, 1, l_h)
        (lq, q), (lk, k), (lv, v) = map(split_index_fn, (q, k, v))
        has_local<a id="change">, has_sinkhorn = </a><a id="change">map(</a>lambda x: x.shape[1] &gt; 0, (lq<a id="change">, q</a>)<a id="change">)</a>

        out = []

        if has_local &gt; 0:</code></pre>