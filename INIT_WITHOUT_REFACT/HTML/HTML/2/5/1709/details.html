<html><h3>Pattern ID :1709
</h3><img src='6748342.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        c3 = torch.cat([c2, b3], dim=1)
        o3 = self.c3(c3)

        out<a id="change"> = </a><a id="change">self.upsample(</a>o3<a id="change">, scale=self.scale)</a>

        out = self.exit(out)
        out = self.add_mean(out)
</code></pre><h3>After Change</h3><pre><code class='java'>
                
    def forward(self, x, scale=None):
        if self.scale is not None:
            <a id="change">if </a>scale is not None and <a id="change">scale != self.scale</a><a id="change">:
                </a>raise ValueError(f"Network scale is {self.scale}, not {scale}")
            scale<a id="change"> = </a>self.scale
        else:
            if scale is None:
                raise ValueError(f"Network scale was not set")</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/coloquinte/torchsr/commit/8a879bbf29cf0d0029d9931604a4a72c80e95cba#diff-fd3657e4256267f661509af8f96534e54f1d0993efe46cd8a50f0139097aec2bL202' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 6748342</div><div id='project'> Project Name: coloquinte/torchsr</div><div id='commit'> Commit Name: 8a879bbf29cf0d0029d9931604a4a72c80e95cba</div><div id='time'> Time: 2021-05-09</div><div id='author'> Author: gabriel.gouvine_GIT@gmx.com</div><div id='file'> File Name: models/carn.py</div><div id='m_class'> M Class Name: CARN</div><div id='n_method'> N Class Name: CARN</div><div id='m_method'> M Method Name: forward(3)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: models/carn.py</div><div id='n_file'> N File Name: models/carn.py</div><div id='m_start'> M Start Line: 217</div><div id='m_end'> M End Line: 219</div><div id='n_start'> N Start Line: 202</div><div id='n_end'> N End Line: 226</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        ph, pw = score.size(2), score.size(3)
        h, w = target.size(1), target.size(2)
        if ph != h or pw != w:
            score = <a id="change">F.upsample(
                    input=score, size=(h, w), mode=&quotbilinear&quot)</a>

        loss<a id="change"> = </a>self.criterion(score, target)

        return loss
</code></pre><h3>After Change</h3><pre><code class='java'>

    def forward(self, score, target):

        <a id="change">if config.MODEL.NUM_OUTPUTS == 1</a><a id="change">:
            </a>score<a id="change"> = </a>[score]

        weights = config.LOSS.BALANCE_WEIGHTS
        assert len(weights) == len(score)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/chenjun2hao/ddrnet.pytorch/commit/3ce340bc520946fb220e83075f6e015bbe87cfe5#diff-87de9e9894a51d531879f3422570eeeb987506cd19d44cd28cf06d1dc4537642L19' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 6748343</div><div id='project'> Project Name: chenjun2hao/ddrnet.pytorch</div><div id='commit'> Commit Name: 3ce340bc520946fb220e83075f6e015bbe87cfe5</div><div id='time'> Time: 2019-12-12</div><div id='author'> Author: hsfzxjy@gmail.com</div><div id='file'> File Name: lib/core/criterion.py</div><div id='m_class'> M Class Name: CrossEntropy</div><div id='n_method'> N Class Name: CrossEntropy</div><div id='m_method'> M Method Name: forward(3)</div><div id='n_method'> N Method Name: forward(3)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: lib/core/criterion.py</div><div id='n_file'> N File Name: lib/core/criterion.py</div><div id='m_start'> M Start Line: 20</div><div id='m_end'> M End Line: 28</div><div id='n_start'> N Start Line: 36</div><div id='n_end'> N End Line: 42</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
        c3 = torch.cat([c2, b3], dim=1)
        o3 = self.c3(c3)

        out<a id="change"> = </a><a id="change">self.upsample(</a>o3<a id="change">, scale=self.scale)</a>

        out = self.exit(out)
        out = self.add_mean(out)
</code></pre><h3>After Change</h3><pre><code class='java'>
                
    def forward(self, x, scale=None):
        if self.scale is not None:
            <a id="change">if </a>scale is not None and <a id="change">scale != self.scale</a><a id="change">:
                </a>raise ValueError(f"Network scale is {self.scale}, not {scale}")
            scale<a id="change"> = </a>self.scale
        else:
            if scale is None:
                raise ValueError(f"Network scale was not set")</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/coloquinte/torchsr/commit/8a879bbf29cf0d0029d9931604a4a72c80e95cba#diff-fd3657e4256267f661509af8f96534e54f1d0993efe46cd8a50f0139097aec2bL288' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 6748338</div><div id='project'> Project Name: coloquinte/torchsr</div><div id='commit'> Commit Name: 8a879bbf29cf0d0029d9931604a4a72c80e95cba</div><div id='time'> Time: 2021-05-09</div><div id='author'> Author: gabriel.gouvine_GIT@gmx.com</div><div id='file'> File Name: models/carn.py</div><div id='m_class'> M Class Name: CARNM</div><div id='n_method'> N Class Name: CARNM</div><div id='m_method'> M Method Name: forward(3)</div><div id='n_method'> N Method Name: forward(2)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: models/carn.py</div><div id='n_file'> N File Name: models/carn.py</div><div id='m_start'> M Start Line: 304</div><div id='m_end'> M End Line: 306</div><div id='n_start'> N Start Line: 295</div><div id='n_end'> N End Line: 320</div><BR>