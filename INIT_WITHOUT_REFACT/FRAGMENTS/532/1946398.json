{"BEFORE":"        t = self.time_mlp(time) if exists(self.time_mlp) else None\n\n        h = []\n\n        for resnet, resnet2, attn, downsample in self.downs:\n            x = resnet(x, t)\n            x = resnet2(x, t)\n            x = attn(x)\n            h.append(x)\n            x = downsample(x)\n\n        x = self.mid_block1(x, t)\n        x = self.mid_attn(x)\n        x = self.mid_block2(x, t)\n\n        for resnet, resnet2, attn, upsample in self.ups:\n            x = torch.cat((x, h.pop()), dim=1)\n            x = resnet(x, t)\n            x = resnet2(x, t)\n            x = attn(x)\n            x = upsample(x)\n\n        return self.final_conv(x)\n","AFTER":"        t = self.time_mlp(time) if exists(self.time_mlp) else None\n\n        feats = []\n        for layer in self.downs:\n            if isinstance(layer, ResnetBlock):\n                x = layer(x, t)\n            else:\n                x = layer(t)\n            feats.append(x)\n\n        for layer in self.mid:\n            if isinstance(layer, ResnetBlock):\n                x = layer(x, t)\n            else:\n                x = layer(t)\n\n        for layer in self.ups:\n            if isinstance(layer, ResnetBlock):\n                x = layer(torch.cat((x, feats.pop()), dim=1), t)\n            else:\n                x = layer(t)\n\n        return self.final_conv(x)\n"}