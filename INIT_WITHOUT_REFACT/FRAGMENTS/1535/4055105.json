{"BEFORE":"        for key, task in task_flow.tasks.items():\n            setattr(self, key, TaskLossDecorator(task, child_reduction))\n\n        print('Party')\n","AFTER":"    def __init__(self, task_flow, parent_reduction, child_reduction, prefix=''):\n        super().__init__()\n        self.parent_reduction = parent_reduction\n        self._task_flow = task_flow\n        # Save a reference to the flow function of the original class\n        # We will then call it by replacing the self, this way effectively running\n        # it with this class. And this class stores Pytorch modules as class attributes\n        self.flow = task_flow.__class__.flow\n\n        for key, task in task_flow.tasks.items():\n            if not task.has_children():\n                instance = TaskLossDecorator(task, child_reduction, prefix)\n            else:\n                instance = TaskFlowLoss(task, child_reduction, child_reduction, prefix=f'{prefix}{task.get_name()}.')\n\n            setattr(self, key, instance)\n"}