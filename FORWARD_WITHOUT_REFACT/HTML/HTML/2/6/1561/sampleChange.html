<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        
        output = src
        attention_lst = []
        <a id="change">for </a>enc_layer in self.layers<a id="change">:
            </a>output, attention = enc_layer(
                output,
                src_mask=src_mask,
                src_key_padding_mask=src_key_padding_mask,</code></pre><h3>After Change</h3><pre><code class='java'>
        attention_lst = []
        if output_hidden_states:
            hidden_states = {}
        <a id="change">for </a>i, <a id="change">enc_layer</a> in <a id="change">enumerate(</a>self.layers<a id="change">):
            </a><a id="change">if </a>not self.training or self.layerdrop_prob == 0. or <a id="change">keep_probs[i] &gt; self.layerdrop_prob</a><a id="change">:
                </a>output, attention = enc_layer(
                    output,
                    src_mask=src_mask,
                    src_key_padding_mask=src_key_padding_mask,</code></pre>