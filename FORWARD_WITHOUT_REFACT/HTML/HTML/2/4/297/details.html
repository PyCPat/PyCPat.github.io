<html><h3>Pattern ID :297
</h3><img src='1240643.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    def forward(self, tgt, memory=None, memory_mask=None):
        tgt_mask = target_mask(tgt)
        
        decoder_output = <a id="change">self.embed(</a>tgt<a id="change">)*</a>scale + self.pos_enc(tgt)
        for i, dec_layer in enumerate(self.layers):
            decoder_output = dec_layer(decoder_output, tgt_mask, memory, memory_mask)
        decoder_output = self.fc(self.last_norm(decoder_output))</code></pre><h3>After Change</h3><pre><code class='java'>
    def forward(self, tgt, memory=None, memory_mask=None):
        tgt_mask = target_mask(tgt, ignore_id=self.pad_id)
        
        decoder_output = <a id="change">self.embed(</a>tgt<a id="change">)*</a>self.scale
        for i, dec_layer in enumerate(self.layers):
            decoder_output = dec_layer(decoder_output, tgt_mask, memory, memory_mask)
        decoder_output = self.fc(self.last_norm(decoder_output))</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/qute012/kosr/commit/ea88a3f5f153b1559390b55d50e546aecafddcd0#diff-656f53599d0d5d8fda261a54004adfe7f738dabb1713dd125b76b7c5b78b5183L51' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1240643</div><div id='project'> Project Name: qute012/kosr</div><div id='commit'> Commit Name: ea88a3f5f153b1559390b55d50e546aecafddcd0</div><div id='time'> Time: 2021-01-27</div><div id='author'> Author: ejrwls012@gmail.com</div><div id='file'> File Name: kosr/model/transformer/decoder.py</div><div id='m_class'> M Class Name: Decoder</div><div id='n_method'> N Class Name: Decoder</div><div id='m_method'> M Method Name: forward(4)</div><div id='n_method'> N Method Name: forward(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: kosr/model/transformer/decoder.py</div><div id='n_file'> N File Name: kosr/model/transformer/decoder.py</div><div id='m_start'> M Start Line: 51</div><div id='m_end'> M End Line: 51</div><div id='n_start'> N Start Line: 54</div><div id='n_end'> N End Line: 54</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def forward(self, tgt, memory=None, memory_mask=None):
        tgt_mask = target_mask(tgt, ignore_id=self.pad_id).to(tgt.device).unsqueeze(-3)
        
        decoder_output = <a id="change">self.embed(</a>tgt<a id="change">)*</a>self.scale
        for i, dec_layer in enumerate(self.layers):
            decoder_output = dec_layer(decoder_output, tgt_mask, memory, memory_mask)
        decoder_output = self.fc(self.last_norm(decoder_output))</code></pre><h3>After Change</h3><pre><code class='java'>
    def forward(self, tgt, memory=None, memory_mask=None):
        tgt_mask = target_mask(tgt, ignore_id=self.pad_id).to(tgt.device).unsqueeze(-3)
        
        decoder_output = <a id="change">self.embed(</a>tgt<a id="change">)*</a>self.scale + self.pos_enc(tgt)
        for i, dec_layer in enumerate(self.layers):
            decoder_output = dec_layer(decoder_output, tgt_mask, memory, memory_mask)
        decoder_output = self.fc(self.last_norm(decoder_output))</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/qute012/kosr/commit/c2dc7486f3711f6d7b7128ddd71aa6814fab3721#diff-656f53599d0d5d8fda261a54004adfe7f738dabb1713dd125b76b7c5b78b5183L50' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1240646</div><div id='project'> Project Name: qute012/kosr</div><div id='commit'> Commit Name: c2dc7486f3711f6d7b7128ddd71aa6814fab3721</div><div id='time'> Time: 2021-01-31</div><div id='author'> Author: ejrwls012@gmail.com</div><div id='file'> File Name: kosr/model/transformer/decoder.py</div><div id='m_class'> M Class Name: Decoder</div><div id='n_method'> N Class Name: Decoder</div><div id='m_method'> M Method Name: forward(4)</div><div id='n_method'> N Method Name: forward(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: kosr/model/transformer/decoder.py</div><div id='n_file'> N File Name: kosr/model/transformer/decoder.py</div><div id='m_start'> M Start Line: 53</div><div id='m_end'> M End Line: 58</div><div id='n_start'> N Start Line: 53</div><div id='n_end'> N End Line: 58</div><BR>'><BR><BR><BR><h3>Before Change</h3><pre><code class='java'>
    def forward(self, tgt, memory=None, memory_mask=None):
        tgt_mask = target_mask(tgt, ignore_id=self.pad_id).to(tgt.device).unsqueeze(-3)
        
        decoder_output = <a id="change">self.embed(</a>tgt<a id="change">)*</a>self.scale
        for i, dec_layer in enumerate(self.layers):
            decoder_output = dec_layer(decoder_output, tgt_mask, memory, memory_mask)
        decoder_output = self.fc(self.last_norm(decoder_output))</code></pre><h3>After Change</h3><pre><code class='java'>
    def forward(self, tgt, memory=None, memory_mask=None):
        tgt_mask = target_mask(tgt, ignore_id=self.pad_id).to(tgt.device).unsqueeze(-3)
        
        decoder_output = <a id="change">self.embed(</a>tgt<a id="change">)*</a>self.scale + self.pos_enc(tgt)
        for i, dec_layer in enumerate(self.layers):
            decoder_output = dec_layer(decoder_output, tgt_mask, memory, memory_mask)
        decoder_output = self.last_norm(decoder_output)</code></pre>'><BR><BR><BR><BR><div id='link'><a href='https://github.com/qute012/kosr/commit/573f9a768ae7e994e315b4d899b20d6b36beade5#diff-8eb6cb41a575a7511d39a1459fe2a86f9f9f9935fe402e1c761a1748028240eaL49' target='_blank'>Link</a></div><div id='fragmentid'> Fragment ID: 1240644</div><div id='project'> Project Name: qute012/kosr</div><div id='commit'> Commit Name: 573f9a768ae7e994e315b4d899b20d6b36beade5</div><div id='time'> Time: 2021-01-29</div><div id='author'> Author: ejrwls012@gmail.com</div><div id='file'> File Name: kosr/model/transducer/decoder.py</div><div id='m_class'> M Class Name: Decoder</div><div id='n_method'> N Class Name: Decoder</div><div id='m_method'> M Method Name: forward(4)</div><div id='n_method'> N Method Name: forward(4)</div><div id='m_parent_class'> M Parent Class: nn.Module</div><div id='n_parent_class'> N Parent Class: nn.Module</div><div id='m_file'> M File Name: kosr/model/transducer/decoder.py</div><div id='n_file'> N File Name: kosr/model/transducer/decoder.py</div><div id='m_start'> M Start Line: 52</div><div id='m_end'> M End Line: 55</div><div id='n_start'> N Start Line: 53</div><div id='n_end'> N End Line: 56</div><BR>