{"BEFORE":"        if self.proj is not None and self.pre_proj:\n            x = self.proj(x)\n\n        x = x.mean(-2) \/ x_len.float().unsqueeze(-1)\n\n        if self.proj is not None and not self.pre_proj:\n            x = self.proj(x)\n","AFTER":"        if self.pre_proj is not None:\n            x = self.pre_proj(x)\n\n        if x_len is not None:\n            x = [x[b, : x_len[b]].mean(0) for b in range(len(x))]\n            x = torch.stack(x, dim=0)\n        else:\n            x = x.mean(1)\n\n        if self.post_proj is not None:\n            x = self.post_proj(x)\n\n        return x\n"}