{"BEFORE":"        gridpoints = self.sample_gridpoints(proposals, self.cfg.n_gridpoints)\n        return gridpoints\n","AFTER":"    def forward(self, proposals, keypoints_xyz, keypoints_features):\n        \"\"\"\n        Gather features from within proposals.\n        TODO: Ensure gridpoint features are reduced correctly.\n        \"\"\"\n        gridpoints = self.sample_gridpoints(proposals)\n        gridpoints = gridpoints.view(1, -1, 3)\n        pooled_features = self.pnet(keypoints_xyz, keypoints_features, gridpoints)[1]\n        n = proposals.wlh.shape[0]\n        m = self.cfg.n_gridpoints\n        pooled_features = pooled_features.view(1, -1, n, m) \\\n            .permute(0, 3, 1, 2).contiguous().view(1, n, -1)\n        pooled_features = self.reduction(pooled_features)\n        return pooled_features\n"}