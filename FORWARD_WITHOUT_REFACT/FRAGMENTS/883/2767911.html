<link rel="stylesheet" href="../default.css">
<script src="../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            coors_out = coors

        if exists(self.node_mlp):
            m_ij = m_ij.masked_fill(~<a id="change">mask[..., None]</a>, 0.)

            if self.m_pool_method == &quotmean&quot:
                if exists(mask):</code></pre><h3>After Change</h3><pre><code class='java'>
    def forward(self, feats, coors, edges = None, mask = None, adj_mat = None):
        b, n, d, device, fourier_features, num_nearest, valid_radius, only_sparse_neighbors = *feats.shape, feats.device, self.fourier_features, self.num_nearest_neighbors, self.valid_radius, self.only_sparse_neighbors

        <a id="change">if </a><a id="change">exists(</a>mask<a id="change">):
            </a>num_nodes = mask.sum(dim = -1)

        use_nearest = num_nearest &gt; 0
</code></pre>