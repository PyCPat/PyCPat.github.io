{"BEFORE":"        return x\n","AFTER":"        x = rearrange(x, 'b c -> b c () ()')\n        x = self.initial_conv(x)\n\n        residuals = dict()\n\n        for (res, (up, sle)) in zip(self.res_layers, self.layers):\n            x = up(x)\n            if exists(sle):\n                out_res = self.sle_map[res]\n                residual = sle(x)\n                residuals[out_res] = residual\n\n            if res in residuals:\n                x = x + residuals[res]\n\n        x = self.out_conv(x)\n        return x.tanh()\n"}