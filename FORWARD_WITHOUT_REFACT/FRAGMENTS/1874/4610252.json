{"BEFORE":"        self.mask = Variable(torch.tril(torch.ones(self.maxlen, self.maxlen)).view(1, 1, self.maxlen, self.maxlen), requires_grad=False).cuda()\n","AFTER":"        use_cuda = opt['cuda']\n\n        assert n_state % n_head == 0\n        # if mask is needed, uncomment this\n        self.maxlen = 2048 # beyond this scale \n        self.mask = Variable(torch.tril(torch.ones(self.maxlen, self.maxlen)).view(1, 1, self.maxlen, self.maxlen), requires_grad=False)\n        if use_cuda:\n            self.mask.cuda()\n        self.n_head = n_head\n        self.c_proj = Conv1D(n_state, nx)\n        self.attn_dropout = nn.Dropout(attn_pdrop)\n        self.resid_dropout = nn.Dropout(resid_pdrop)\n        self.use_cuda = use_cuda\n"}