{"BEFORE":"        return o_de, o_dr_log.squeeze(1), attn\n","AFTER":"        g = cond_input['x_vectors'] if 'x_vectors' in cond_input else None\n        o_en, o_en_dp, x_mask, g = self._forward_encoder(x, x_lengths, g)\n        o_dr_log = self.duration_predictor(o_en_dp.detach(), x_mask)\n        o_de, attn = self._forward_decoder(o_en,\n                                           o_en_dp,\n                                           dr,\n                                           x_mask,\n                                           y_lengths,\n                                           g=g)\n        outputs = {\n            'model_outputs': o_de.transpose(1, 2),\n            'durations_log': o_dr_log.squeeze(1),\n            'alignments': attn\n        }\n        return outputs\n"}