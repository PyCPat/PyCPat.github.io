{"BEFORE":"        length = input.size(1)\n\n        return self.pe[:, :length]\n","AFTER":"        x = x.permute(0, 2, 1).contiguous()\n\n        # x is seq_len, batch, channels\n        # x = x + self.pe[:x.size(0), :]\n\n        # x is batch, channels, seq_len\n        x = x + self.pe[:, :, :x.size(2)]\n\n        x = self.dropout(x)\n\n        x = x.permute(0, 2, 1).contiguous()\n\n        return x\n"}