{"BEFORE":"        norm_denom = torch.sqrt(torch.sum(quats ** 2, dim=-1) + 1)\n\n        # As many ones as there are dimensions in quats\n        ones = s.new_ones((1,) * len(quats.shape))\n\n        # [*, 4]\n        quats = torch.cat((ones.expand(*quats.shape[:-1], 1), quats), dim=-1)\n        quats = quats \/ norm_denom.unsqueeze(-1)\n","AFTER":"        norm_denom = torch.sqrt(torch.sum(quats ** 2, dim=-1) + 1)\n\n        # [*, 3] \n        ones = (\n            s.new_ones((1,) * len(quats.shape)).expand(quats.shape[:-1] + (1,))\n        )\n\n        # [*, 4]\n        quats = torch.cat([ones, quats], dim=-1)\n        quats = quats \/ norm_denom[..., None]\n"}